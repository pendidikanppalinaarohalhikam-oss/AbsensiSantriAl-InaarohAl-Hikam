<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absensi Santri - Pondok Al Inaaroh Alhikam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="gradient-bg min-h-screen">
    <!-- Login Page -->
     
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-gradient-to-br from-blue-900/30 to-black/30 backdrop-blur-md rounded-2xl p-8 w-full max-w-md border border-white/10" style="transform: perspective(1000px)">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-black-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <img src="Gambar WhatsApp 2025-08-17 pukul 05.09.10_f173c3f4.jpg" alt="Logo Pondok" class="w-100 h-50 object-cover rounded-full border-4">
                </div>
                <h1 class="text-2xl font-bold bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-transparent bg-clip-text">Sistem Absensi Santri</h1>
                <p class="mt-2 bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-transparent bg-clip-text">Pondok Al-Inaaroh Al-Hikam</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-white mb-2">Username</label>
                    <input type="text" id="username" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-white mb-2">Password</label>
                    <input type="password" id="password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-black py-3 rounded-lg hover:from-red-600 hover:via-yellow-600 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-opacity-50 transition duration-300 font-bold shadow-lg">
                    Masuk
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <button id="showRegister" class="text-white hover:text-white text-sm">
                    Belum punya akun? Daftar di sini
                </button>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="min-h-screen flex items-center justify-center p-4 hidden">
         <div class="bg-gradient-to-br from-blue-900/30 to-black/30 backdrop-blur-md rounded-2xl p-8 w-full max-w-md border border-white/10" style="transform: perspective(1000px)">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-transparent bg-clip-text">Daftar Akun Baru</h2>
                <p class="mt-2 bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-transparent bg-clip-text">Untuk Pengurus dan Tamu</p>
            </div>
            
            <form id="registerForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-white mb-2">Nama Lengkap</label>
                    <input type="text" id="regName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-white mb-2">Username</label>
                    <input type="text" id="regUsername" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <div>
                     <label class="block text-sm font-medium text-white mb-2">Password</label>
                     <input 
                            type="password" 
                            id="regPassword" 
                            required 
                            minlength="5" 
                            maxlength="8" 
                            pattern="\d{5,8}" 
                            title="Password harus berupa 5-8 angka" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-white mb-2">Role</label>
                    <select id="regRole" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                        <option value="">Pilih Role</option>
                        <option value="pengurus">Pengurus</option>
                        <option value="Tamu">Tamu</option>
                    </select>
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-black py-3 rounded-lg hover:from-red-600 hover:via-yellow-600 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-opacity-50 transition duration-300 font-bold shadow-lg">
                    Daftar
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <button id="showLogin" class="text-white hover:text-white text-sm">
                    Sudah punya akun? Masuk di sini
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="min-h-screen hidden">
        <!-- Header -->
        <header class="border-transparent border-b border-white-100">
            <div class="max-w-7x1 mx-auto px-4 sm:px-7 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <div class="w-11 h-11 bg-white rounded-full flex items-center justify-center mr-3">
                            <img src="Gambar WhatsApp 2025-08-17 pukul 05.09.10_f173c3f4.jpg" alt="Logo Pondok" class="w-100 h-50 object-cover rounded-full">
                        </div>
                        <div>
                            <h1 class="text-xl font-bold bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-transparent bg-clip-text">Absensi Santri</h1>
                            <p class="mt-2 bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-transparent bg-clip-text">Pondok Al Inaaroh Alhikam</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span id="userInfo" class="bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-transparent bg-clip-text font-medium"></span>
                        <button id="logoutBtn" class="bg-red-700 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200">
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Admin Panel -->
            <div id="adminPanel" class="hidden mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 border border-emerald-100">
                    <h2 class="text-xl font-bold text-emerald-800 mb-4">Daftar Pengguna</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-emerald-50">
                                    <th class="px-4 py-3 text-left text-emerald-800 font-medium">Nama</th>
                                    <th class="px-4 py-3 text-left text-emerald-800 font-medium">Username</th>
                                    <th class="px-4 py-3 text-left text-emerald-800 font-medium">Role</th>
                                    <th class="px-4 py-3 text-left text-emerald-800 font-medium">Tanggal Daftar</th>
                                    <th class="px-4 py-3 text-left text-emerald-800 font-medium">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="usersList">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Activity Selection (Pengurus Only) -->
            <div id="activityPanel" class="hidden mb-8">
                <div class="bg-gradient-to-br from-blue-900/30 to-black/30 backdrop-blur-md rounded-2xl shadow-lg p-6 border border-white/10" style="transform: perspective(1000px)">
                    <h2 class="text-xl font-bold text-white mb-4">Pilih Jenis Kegiatan</h2>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <button class="activity-btn bg-blue-800 text-white p-4 rounded-lg hover:bg-blue-600 transition duration-200" data-activity="sekolah">
                            <div class="text-2xl mb-2">📚</div>
                            <div class="font-medium">Sekolah</div>
                        </button>
                        <button class="activity-btn bg-blue-800 text-white p-4 rounded-lg hover:bg-blue-600 transition duration-200" data-activity="absen kamar">
                            <div class="text-2xl mb-2">🏠</div>
                            <div class="font-medium">Absen Kamar</div>
                        </button>
                        <button class="activity-btn bg-green-500 text-white p-4 rounded-lg hover:bg-green-600 transition duration-200" data-activity="jamaah subuh">
                            <div class="text-2xl mb-2">🕌</div>
                            <div class="font-medium">Jamaah subuh</div>
                        </button>
                        <button class="activity-btn bg-green-500 text-white p-4 rounded-lg hover:bg-green-600 transition duration-200" data-activity="jamaah Ashar">
                            <div class="text-2xl mb-2">🕌</div>
                            <div class="font-medium">Jamaah Ashar</div>
                        </button><button class="activity-btn bg-green-500 text-white p-4 rounded-lg hover:bg-green-600 transition duration-200" data-activity="jamaah magrib">
                            <div class="text-2xl mb-2">🕌</div>
                            <div class="font-medium">Jamaah Magrib</div>
                        </button><button class="activity-btn bg-green-500 text-white p-4 rounded-lg hover:bg-green-600 transition duration-200" data-activity="jamaah Isya">
                            <div class="text-2xl mb-2">🕌</div>
                            <div class="font-medium">Jamaah Isya</div>
                        </button>
                        <button class="activity-btn bg-orange-500 text-white p-4 rounded-lg hover:bg-orange-600 transition duration-200" data-activity="piket">
                            <div class="text-2xl mb-2">🧹</div>
                            <div class="font-medium">Piket</div>
                        </button>
                        <button class="activity-btn bg-orange-500 text-white p-4 rounded-lg hover:bg-orange-600 transition duration-200" data-activity="roan">
                            <div class="text-2xl mb-2">🔨</div>
                            <div class="font-medium">Roan/Kerjabakti</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- QR Scanner -->
            <div id="scannerPanel" class="hidden mb-8">
                <div class="bg-gradient-to-br from-blue-900/30 to-black/30 backdrop-blur-md rounded-2xl shadow-lg p-6 border border-white/10" style="transform: perspective(1000px)">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-white">Scanner QR Code</h2>
                        <div class="text-sm text-white">
                            Kegiatan: <span id="selectedActivity" class="font-medium"></span>
                        </div>
                    </div>
                    
                    <div class="max-w-md mx-auto">
                        <div id="qr-reader" class="border-2 border-emerald-300 rounded-lg overflow-hidden"></div>
                        <div id="scanResult" class="mt-4 p-4 rounded-lg hidden">
                            <div id="scanMessage" class="text-center font-medium"></div>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center">
                        <button id="backToActivity" class="bg-gradient-to-r from-red-500 via-yellow-500 to-blue-500 text-black px-6 py-2 rounded-lg hover:from-red-600 hover:via-yellow-600 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-opacity-50 transition duration-300 font-bold shadow-lg">
                            Kembali ke Pilihan Kegiatan
                        </button>
                    </div>
                </div>
            </div>

            <!-- Attendance Records -->
            <div id="recordsPanel" class="bg-gradient-to-br from-blue-900/30 to-black/30 backdrop-blur-md rounded-2xl shadow-lg p-6 border border-white/10" style="transform: perspective(1000px)">
                <h2 class="text-xl font-bold text-white mb-4">Data Absensi Hari Ini</h2>
                <div class="overflow-x-auto">
                    <table class="w-full table-auto">
                        <thead>
                            <tr class="bg-gradient-to-br from-blue-900/30 to-black/30 backdrop-blur-md rounded-2xl shadow-lg p-6 border border-white/10" style="transform: perspective(1000px)">
                                <th class="px-4 py-3 text-left text-white font-medium">Nama</th>
                                <th class="px-4 py-3 text-left text-white font-medium">NIS/ID</th>
                                <th class="px-4 py-3 text-left text-white font-medium">Kegiatan</th>
                                <th class="px-4 py-3 text-left text-white font-medium">Status</th>
                                <th class="px-4 py-3 text-left text-white font-medium">Waktu</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceList">
                        </tbody>
                    </table>
                </div>
            </div>

            <footer class="border-t border-white/10">
                <div class="max-w-7xl mx-auto px-4 sm:px-7 lg:px-8">
                    <div class="flex flex-col md:flex-row justify-between items-center py-6">
                        <div class="text-center md:text-left mb-4 md:mb-0">
                            <p class="text-gray-400 text-sm">© 2025 Pondok Al Inaaroh Al Hikam. All rights reserved.</p>
                            <p class="mt-1 text-gray-500 text-xs">Dikelola oleh Santri Al Inaaroh Al Hikam</p>
                            <p class="mt-1 text-gray-500 text-xs">By: Faqih Faizul Haq</p>
                        </div>
                        <div class="text-center md:text-right">
                            <p class="text-gray-400 text-sm">Hubungi kami:</p>
                            <a href="https://lynk.id/alinaarohalhikam?fbclid=PAQ0xDSwMfcIBleHRuA2FlbQIxMQABp4wMROiewWwIeu5oqkEkMmq4gnreBOhYZBisC-Xbz8YUTGr3GOTT3C_io5GT_aem_AymOBNGFGofvVJLYLfzJvw" class="text-blue-400 hover:text-blue-300 transition duration-200">Alinaarohalhikam84@gmail.com</a>
                        </div>
                    </div>
                </div>
            </footer>
        </main>
    </div>

    <!-- Edit User Modal -->
    <div id="editUserModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-emerald-100">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-emerald-800">Edit User</h2>
            </div>
            
            <form id="editUserForm" class="space-y-6">
                <input type="hidden" id="editUsername">
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap</label>
                    <input type="text" id="editName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="editUsernameField" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password Baru (kosongkan jika tidak ingin mengubah)</label>
                    <input type="password" id="editPassword" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                    <select id="editRole" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                        <option value="pengurus">Pengurus</option>
                        <option value="pelihat">Pelihat</option>
                    </select>
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 transition duration-200 font-medium">
                        Simpan Perubahan
                    </button>
                    <button type="button" onclick="closeEditModal()" class="flex-1 bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600 transition duration-200 font-medium">
                        Batal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9718d0770759e783',t:'MTc1NTU5NzczNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>